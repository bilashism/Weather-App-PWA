!function(){style=document.createElement("style"),style.type="text/css",style.innerText=".noScroll { position: fixed; overflow: hidden; }",document.querySelector("head").appendChild(style),document.body.classList.add("noScroll");let e=document.querySelector(".preloader");window.addEventListener("load",()=>{e.classList.add("loaded"),document.body.classList.remove("noScroll"),document.querySelector("head").removeChild(style),delete style})}(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"/weather-app-pwa/"}).then(()=>console.log("service worker registered")).catch(e=>console.log("service worker not registered",e)),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".location"),t=document.querySelector(".temp"),o=document.querySelector(".unit"),n=document.querySelector(".summary"),r=(document.querySelector(".info"),document.querySelector(".search-form")),c=document.querySelector(".today"),a=document.querySelector(".tomorrow"),l=(document.querySelector(".location2"),document.querySelector(".temp2"),document.querySelector(".summary2"),[e,t,n,c,a]),d=[".location",".temp",".summary",".today",".tomorrow"],s='<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>',u=document.querySelector(".search_input");const i="2ae7d598568b7c56f3ae4e1be24d5def",m="https://cors-anywhere.herokuapp.com/";function y(r){fetch(`${m}${r}`).then(e=>e.json()).then(r=>{console.log(r);const l=`${m}https://api.darksky.net/forecast/${i}/${r.results[0].geometry.lat},${r.results[0].geometry.lng}?units=auto`;fetch(l).then(e=>e.json()).then(l=>{console.log(l);const{summary:s,temperature:u,icon:i}=l.currently;p(i,document.querySelector(".weather-icon"),"--icon-color"),e.textContent=r.results[0].formatted,n.textContent=s,t.textContent=`${u}`,o.textContent="°c",d.forEach(e=>{new S(e,Math.floor(10*Math.random()))}),function(){let{summary:e,icon:t,temperatureMax:o,temperatureMin:n}=l.daily.data[0];c.textContent=`${e}`,p(t,document.querySelector(".today-wrap .weather-icon"),"--indigo"),document.querySelector(".today-wrap .temp-min-max").textContent=`${parseInt(n)}° | ${parseInt(o)}°`}(),function(){let{summary:e,icon:t,temperatureMax:o,temperatureMin:n}=l.daily.data[1];a.textContent=`${e}`,p(t,document.querySelector(".tomorrow-wrap .weather-icon"),"--indigo"),document.querySelector(".tomorrow-wrap .temp-min-max").textContent=`${parseInt(n)}° | ${parseInt(o)}°`}(),function(){let{summary:e,icon:t}=l.daily;document.querySelector(".week-wrap .week").textContent=`${e}`,p(t,document.querySelector(".week-wrap .weather-icon"),"--indigo")}()}).catch(e=>console.log(e))}).catch(e=>console.log(e))}function p(e,t,o){const n=new Skycons({color:`${getComputedStyle(document.documentElement).getPropertyValue(o)}`}),r=e.replace(/-/g,"_").toUpperCase();return n.play(),n.set(t,Skycons[r])}r.addEventListener("submit",t=>{t.preventDefault();let o=u.value,n="https://api.opencagedata.com/geocode/v1/json?key=8631f37008af4afbbb6077f545b1b0be&q="+o+"&pretty=1&no_annotations=1";null!==o&&isNaN(o)&&(""===e.textContent?e.innerHTML=s:y(n)),l.forEach(e=>{e.textContent="",e.innerHTML=s})}),navigator.geolocation&&(navigator.geolocation.getCurrentPosition(t=>{let o=t.coords.latitude,n=t.coords.longitude,r="https://api.opencagedata.com/geocode/v1/json?key=8631f37008af4afbbb6077f545b1b0be&q="+encodeURIComponent(o+","+n)+"&pretty=1&no_annotations=1";""===e.textContent?e.innerHTML=s:y(r),y(r)}),l.forEach(e=>{e.textContent="",e.innerHTML=s}));const h=document.querySelector(".search-icon"),g=document.querySelector(".search_input"),f=document.querySelector(".tip");h.addEventListener("click",()=>{g.classList.add("extended"),g.focus(),f.classList.add("visible"),new S(".tip",Math.floor(10*Math.random()));let e=0,t="Enter your desired location";!function o(){e<t.length&&(msg=g.getAttribute("placeholder")+t.charAt(e),g.setAttribute("placeholder",msg),e++,setTimeout(o,100))}()},{once:!0});class S{constructor(e,t){let o,n,r=`${document.querySelector(e).textContent} `,c=0,a=this.speed||50;!function t(){if((n=r.slice(0,++c))===r)return;document.querySelector(e).textContent=n;let l=n.slice(-1);if("<"===l&&(o=!0),">"===l&&(o=!1),o)return t();setTimeout(t,a)}()}}!function e(){let t=new Date,o=t.getHours(),n=t.getMinutes(),r=t.getSeconds(),c="am";0==o&&(o=12),o>12&&(o-=12,c="pm"),o=o<10?"0"+o:o,n=n<10?"0"+n:n,r=r<10?"0"+r:r,document.querySelector(".clockNow").textContent=`${o}:${n}:${r}`,document.querySelector(".am-pm").textContent=`${c}`,setTimeout(e,1e3)}()});
